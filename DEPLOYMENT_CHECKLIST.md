# Чек-лист подготовки проекта к деплою

## 1. Подготовка сервера

- [ ] Установить Docker и Docker Compose
- [ ] Настроить файрвол (запустить `security.sh`)
- [ ] Настроить SSL-сертификаты
- [ ] Настроить мониторинг (запустить `monitoring.sh`)
- [ ] Настроить бэкапы (запустить `backup.sh`)

## 2. Проверка безопасности

- [ ] Проверить все пароли и секретные ключи
- [ ] Настроить CORS
- [ ] Проверить настройки файрвола
- [ ] Настроить fail2ban
- [ ] Проверить права доступа к файлам

## 3. Настройка мониторинга

- [ ] Проверить доступность Grafana (порт 3000)
- [ ] Проверить доступность Prometheus (порт 9090)
- [ ] Настроить дашборды в Grafana
- [ ] Настроить алерты

## 4. Настройка бэкапов

- [ ] Проверить создание бэкапов
- [ ] Настроить расписание бэкапов
- [ ] Проверить восстановление из бэкапа
- [ ] Настроить хранение бэкапов

## 5. Финальные проверки

- [ ] Проверить работу API
- [ ] Проверить работу фронтенда
- [ ] Проверить работу базы данных
- [ ] Проверить логи
- [ ] Проверить SSL-сертификаты

## 6. Документация

- [ ] Обновить README.md
- [ ] Документировать процесс деплоя
- [ ] Документировать процесс обновления
- [ ] Документировать процесс восстановления

## Команды для проверки

```bash
# Проверка статуса сервисов
docker-compose ps

# Проверка логов
docker-compose logs -f

# Проверка безопасности
./security-check.sh

# Создание бэкапа
./backup.sh

# Проверка мониторинга
curl http://localhost:9090/-/healthy  # Prometheus
curl http://localhost:3000/api/health  # Grafana
```

## Контакты для экстренных случаев

- Администратор сервера: [контакт]
- Разработчик: [контакт]
- Поддержка: [контакт]

## Процесс обновления

1. Сделать бэкап:
   ```bash
   ./backup.sh
   ```

2. Обновить код:
   ```bash
   git pull origin main
   ```

3. Перезапустить сервисы:
   ```bash
   docker-compose down
   docker-compose up -d --build
   ```

4. Проверить логи:
   ```bash
   docker-compose logs -f
   ```

## Процесс восстановления

1. Остановить сервисы:
   ```bash
   docker-compose down
   ```

2. Восстановить из бэкапа:
   ```bash
   # Восстановление MongoDB
   docker exec -i mongo mongorestore --archive < backup_file
   ```

3. Запустить сервисы:
   ```bash
   docker-compose up -d
   ```

4. Проверить работоспособность:
   ```bash
   docker-compose logs -f
   ``` 